<!doctype html>
<meta charset="utf-8">
<title>FileAPI Test: Verify behavior of Blob URL in unique origins</title>
<meta name="timeout" content="long">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>

<iframe id="sandboxed-iframe" sandbox="allow-scripts"></iframe>

<script>

const iframe_scripts = [
  'resources/fetch-tests.js',
  'url-format.any.js',
  'url-in-tags.window.js',
  'url-with-xhr.any.js',
  'url-with-fetch.any.js',
];

let html = '<!doctype html>\n<meta charset="utf-8">\n<body>\n';
html = html + '<script src="/resources/testharness.js"></' + 'script>\n';
html = html + '<script>setup({"explicit_timeout": true});</' + 'script>\n';
for (const script of iframe_scripts)
  html = html + '<script src="' + script + '"></' + 'script>\n';

const frame = document.querySelector('#sandboxed-iframe');
frame.setAttribute('srcdoc', html);
frame.setAttribute('style', 'display:none;');

fetch_tests_from_window(frame.contentWindow);

</script>
