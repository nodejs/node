{- our $tsget_name = $config{target} =~ /^(VC|vms)-/ ? "tsget.pl" : "tsget";
   our @apps_openssl_src =
       ( qw(openssl.c
            asn1pars.c ca.c ciphers.c cms.c crl.c crl2p7.c dgst.c dhparam.c
            dsa.c dsaparam.c ec.c ecparam.c enc.c engine.c errstr.c gendsa.c
            genpkey.c genrsa.c nseq.c ocsp.c passwd.c pkcs12.c pkcs7.c pkcs8.c
            pkey.c pkeyparam.c pkeyutl.c prime.c rand.c req.c rsa.c rsautl.c
            s_client.c s_server.c s_time.c sess_id.c smime.c speed.c spkac.c
            srp.c ts.c verify.c version.c x509.c rehash.c
            apps.c opt.c s_cb.c s_socket.c
            app_rand.c),
          split(/\s+/, $target{apps_aux_src}) );
   "" -}
IF[{- !$disabled{apps} -}]
  PROGRAMS=openssl
  SOURCE[openssl]={- join(" ", @apps_openssl_src) -}
  INCLUDE[openssl]=.. ../include
  DEPEND[openssl]=../libssl

  {- join("\n  ", map { (my $x = $_) =~ s|\.c$|.o|; "DEPEND[$x]=progs.h" }
                  @apps_openssl_src) -}
  GENERATE[progs.h]=progs.pl $(APPS_OPENSSL)
  DEPEND[progs.h]=../configdata.pm

  SCRIPTS=CA.pl {- $tsget_name -}
  SOURCE[CA.pl]=CA.pl.in
  SOURCE[{- $tsget_name -}]=tsget.in
ENDIF
